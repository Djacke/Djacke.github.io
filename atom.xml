<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Djack&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://djack.top/"/>
  <updated>2018-03-28T08:02:10.611Z</updated>
  <id>http://djack.top/</id>
  
  <author>
    <name>Djack Chen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>redis-sentinel-docker</title>
    <link href="http://djack.top/2018/03/28/docker-redis-sentinel/"/>
    <id>http://djack.top/2018/03/28/docker-redis-sentinel/</id>
    <published>2018-03-28T03:33:14.000Z</published>
    <updated>2018-03-28T08:02:10.611Z</updated>
    
    <content type="html"><![CDATA[<p>本骗简单介绍redis sentinel在docker环境下的快速搭建。</p><h4 id="开源代码拉取"><a href="#开源代码拉取" class="headerlink" title="开源代码拉取"></a>开源代码拉取</h4><p>从github仓库拉取源码 <a href="https://github.com/s7anley/redis-sentinel-docker" target="_blank" rel="noopener">GitHub</a></p><h4 id="修改docker-compose-yml"><a href="#修改docker-compose-yml" class="headerlink" title="修改docker-compose.yml"></a>修改docker-compose.yml</h4><p>按照 <a href="https://gist.github.com/Djacke/0a26054c3eda084dc0ddecd602055af0" target="_blank" rel="noopener">GithubGist</a> 修改docker-compose.yml文件</p><p>注意：<em>本篇介绍的是在开发者个人电脑上安装docker-compose后搭建的redis sentinel环境，验证也是在宿主机上进行，所以compose中的IP地址应该为宿主机的内网IP地址，否则测试代码会拋connect time out异常。</em></p><h4 id="执行docker命令"><a href="#执行docker命令" class="headerlink" title="执行docker命令"></a>执行docker命令</h4><ul><li>启动三个节点的哨兵集群</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d --scale sentinel=3</span><br></pre></td></tr></table></figure><ul><li>验证是否可以成功获取master地址和端口</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec redissentineldocker_sentinel_1 redis-cli -p 26379 sentinel get-master-addr-by-name mymaster</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;本骗简单介绍redis sentinel在docker环境下的快速搭建。&lt;/p&gt;
&lt;h4 id=&quot;开源代码拉取&quot;&gt;&lt;a href=&quot;#开源代码拉取&quot; class=&quot;headerlink&quot; title=&quot;开源代码拉取&quot;&gt;&lt;/a&gt;开源代码拉取&lt;/h4&gt;&lt;p&gt;从github仓库拉
      
    
    </summary>
    
      <category term="devops" scheme="http://djack.top/categories/devops/"/>
    
    
      <category term="redis" scheme="http://djack.top/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>spring-schedule-redis-lock</title>
    <link href="http://djack.top/2018/03/28/spring-schedule-redis-lock/"/>
    <id>http://djack.top/2018/03/28/spring-schedule-redis-lock/</id>
    <published>2018-03-28T03:30:25.000Z</published>
    <updated>2018-03-28T07:46:33.146Z</updated>
    
    <content type="html"><![CDATA[<p>在使用spring cloud开发微服务的过程中遇到了定时任务重复执行的问题，这个问题大家应该经常遇到，下面分享一下自己在项目中的解决方法。</p><h4 id="项目配置"><a href="#项目配置" class="headerlink" title="项目配置"></a>项目配置</h4><ul><li>spring boot <strong>2.0.0.RELEASE</strong></li><li>springcloud <strong>Finchley.M8</strong></li><li>gradle config redis<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">compile &apos;org.springframework.integration:spring-integration-redis&apos;,</span><br><span class="line">         &apos;redis.clients:jedis:2.9.0&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="redis环境"><a href="#redis环境" class="headerlink" title="redis环境"></a>redis环境</h4><a href="/2018/03/28/docker-redis-sentinel/" title="戳一下">戳一下</a><h4 id="java部分"><a href="#java部分" class="headerlink" title="java部分"></a>java部分</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span> RedisConnectionFactory factory;</span><br><span class="line">...</span><br><span class="line"><span class="meta">@Scheduled</span>( cron = <span class="string">"$&#123;xxx.yyy.cron&#125;"</span>)</span><br><span class="line">...</span><br><span class="line">RedisLockRegistry redisLockRegistry = <span class="keyword">new</span> RedisLockRegistry(factory, <span class="string">"registryKey"</span>, <span class="number">60000</span>);</span><br><span class="line">        Lock lock = redisLockRegistry.obtain(<span class="string">"lockName"</span>);</span><br><span class="line">        <span class="keyword">boolean</span> locked = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            locked = lock.tryLock();</span><br><span class="line">            <span class="keyword">if</span>(locked) &#123;</span><br><span class="line">                logger.debug(<span class="string">"成功获取redis锁"</span>);</span><br><span class="line">                <span class="comment">//TODO...</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">catch</span>(Exception e) &#123;</span><br><span class="line">            logger.error(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(locked) &#123;</span><br><span class="line">                lock.unlock();</span><br><span class="line">                logger.debug(<span class="string">"成功释放redis锁"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在使用spring cloud开发微服务的过程中遇到了定时任务重复执行的问题，这个问题大家应该经常遇到，下面分享一下自己在项目中的解决方法。&lt;/p&gt;
&lt;h4 id=&quot;项目配置&quot;&gt;&lt;a href=&quot;#项目配置&quot; class=&quot;headerlink&quot; title=&quot;项目配置&quot;&gt;
      
    
    </summary>
    
      <category term="devops" scheme="http://djack.top/categories/devops/"/>
    
    
      <category term="redis" scheme="http://djack.top/tags/redis/"/>
    
      <category term="schedule" scheme="http://djack.top/tags/schedule/"/>
    
  </entry>
  
  <entry>
    <title>gradle spotbus configuration</title>
    <link href="http://djack.top/2018/03/27/gradle-spotbus-configuration/"/>
    <id>http://djack.top/2018/03/27/gradle-spotbus-configuration/</id>
    <published>2018-03-27T07:09:18.000Z</published>
    <updated>2018-03-28T06:03:36.724Z</updated>
    
    <content type="html"><![CDATA[<p>SpotBugs是FindBugs的继任者，用来寻找Java代码中bug的静态分析工具，<a href="http://spotbugs-in-kengo-toda.readthedocs.io/en/latest/" target="_blank" rel="noopener">Read the Docs</a></p><h3 id="gradle配置"><a href="#gradle配置" class="headerlink" title="gradle配置"></a>gradle配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    id &quot;com.github.spotbugs&quot; version &quot;1.6.1&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tasks.withType(com.github.spotbugs.SpotBugsTask) &#123;</span><br><span class="line">    reports &#123;</span><br><span class="line">        xml.enabled false</span><br><span class="line">        html.enabled true</span><br><span class="line">    &#125;</span><br><span class="line">    excludeFilter file(&apos;gradle/spotbugs-exclude.xml&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="spotbugs-exclude-xml"><a href="#spotbugs-exclude-xml" class="headerlink" title="spotbugs-exclude.xml"></a>spotbugs-exclude.xml</h3><ul><li><a href="http://spotbugs-in-kengo-toda.readthedocs.io/en/latest/filter.html#types-of-match-clauses" target="_blank" rel="noopener">Types of Match clauses</a></li><li><a href="http://spotbugs-in-kengo-toda.readthedocs.io/en/latest/bugDescriptions.html" target="_blank" rel="noopener">Bug descriptions</a></li><li>inner classes configuration use <a href="https://stackoverflow.com/questions/1073656/problems-with-findbugs-exclude-filter" target="_blank" rel="noopener"><strong>$</strong></a></li></ul><p><strong>example</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">FindBugsFilter</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns</span>=<span class="string">"https://github.com/spotbugs/filter/3.0.0"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">xsi:schemaLocation</span>=<span class="string">"https://github.com/spotbugs/filter/3.0.0 https://raw.githubusercontent.com/spotbugs/spotbugs/3.1.0_RC6/spotbugs/etc/findbugsfilter.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Match</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Class</span> <span class="attr">name</span>=<span class="string">"cn.foo.service.Client$UpdaterDTO"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Bug</span> <span class="attr">code</span>=<span class="string">"EI2"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Bug</span> <span class="attr">code</span>=<span class="string">"NP,MS,UwF"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">FindBugsFilter</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;SpotBugs是FindBugs的继任者，用来寻找Java代码中bug的静态分析工具，&lt;a href=&quot;http://spotbugs-in-kengo-toda.readthedocs.io/en/latest/&quot; target=&quot;_blank&quot; rel=&quot;noopen
      
    
    </summary>
    
      <category term="devops" scheme="http://djack.top/categories/devops/"/>
    
    
      <category term="spotbus" scheme="http://djack.top/tags/spotbus/"/>
    
      <category term="gradle" scheme="http://djack.top/tags/gradle/"/>
    
  </entry>
  
  <entry>
    <title>王者荣耀游戏分享</title>
    <link href="http://djack.top/2018/03/19/game-wangzherongyao/"/>
    <id>http://djack.top/2018/03/19/game-wangzherongyao/</id>
    <published>2018-03-19T03:55:02.000Z</published>
    <updated>2018-03-28T06:03:31.120Z</updated>
    
    <summary type="html">
    
    </summary>
    
      <category term="game" scheme="http://djack.top/categories/game/"/>
    
    
      <category term="王者荣耀" scheme="http://djack.top/tags/%E7%8E%8B%E8%80%85%E8%8D%A3%E8%80%80/"/>
    
  </entry>
  
  <entry>
    <title>欢迎访问我的博客</title>
    <link href="http://djack.top/2018/03/16/first-hexo-blog/"/>
    <id>http://djack.top/2018/03/16/first-hexo-blog/</id>
    <published>2018-03-16T07:39:00.000Z</published>
    <updated>2018-03-28T06:09:37.207Z</updated>
    
    <content type="html"><![CDATA[<p>欢迎访问我的第一篇博客，本博客使用 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> 搭建!  如果大家感兴趣，访问更多信息请查看文档<a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a>。</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;欢迎访问我的第一篇博客，本博客使用 &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt; 搭建!  如果大家感兴趣，访问更多信息请查看文档&lt;a href=&quot;https://hexo.io/doc
      
    
    </summary>
    
      <category term="blog" scheme="http://djack.top/categories/blog/"/>
    
    
      <category term="blog" scheme="http://djack.top/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>hexo搭建记录</title>
    <link href="http://djack.top/2018/03/16/hexo-create-chapter1/"/>
    <id>http://djack.top/2018/03/16/hexo-create-chapter1/</id>
    <published>2018-03-16T07:39:00.000Z</published>
    <updated>2018-03-28T06:03:42.613Z</updated>
    
    <content type="html"><![CDATA[<h3 id="搭建博客引用的文章"><a href="#搭建博客引用的文章" class="headerlink" title="搭建博客引用的文章"></a>搭建博客引用的文章</h3><ul><li><a href="http://oopsliu.github.io/2016/03/23/hexotheme/" target="_blank" rel="noopener">Hexo备忘录2–主题theme</a></li><li><a href="http://visugar.com/2017/05/04/20170504SetUpHexoBlog/" target="_blank" rel="noopener">hexo从零开始到搭建完整</a></li><li><a href="https://xiangwenhu.github.io/blog/2017/08/19/other/blogwithhexo/" target="_blank" rel="noopener">Hexo + Github搭建自己的博客</a></li><li><a href="http://www.joryhe.com/2016-05-17-hexoxo-series-for-site-build-basic.html" target="_blank" rel="noopener">HEXO建站-基本设置</a></li><li><a href="http://linfuyan.com/hexo-your-blog/add-weixin-qrcode-to-hueman-sidebar/" target="_blank" rel="noopener">在 Hueman 主题添加侧边栏添加微信公众号二维码</a></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;搭建博客引用的文章&quot;&gt;&lt;a href=&quot;#搭建博客引用的文章&quot; class=&quot;headerlink&quot; title=&quot;搭建博客引用的文章&quot;&gt;&lt;/a&gt;搭建博客引用的文章&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://oopsliu.github.io/20
      
    
    </summary>
    
      <category term="hexo" scheme="http://djack.top/categories/hexo/"/>
    
    
      <category term="blog" scheme="http://djack.top/tags/blog/"/>
    
      <category term="hexo" scheme="http://djack.top/tags/hexo/"/>
    
  </entry>
  
</feed>
